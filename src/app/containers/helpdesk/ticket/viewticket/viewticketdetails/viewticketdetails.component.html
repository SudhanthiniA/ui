<h5 class="m-b-10 ng-star-inserted">
    View Ticket Details
</h5>

<ul class="breadcrumb p-0">
    <li class="breadcrumb-item"><a href="javascript:"><i class="feather icon-home"></i></a></li>
    <li class="breadcrumb-item"><a href="javascript:">Helpdesk</a></li>
    <li class="breadcrumb-item"><a href="javascript:">Tickets</a></li>
    <!-- <li class="breadcrumb-item"><a href="javascript:">Search Ticket</a></li> -->
    <li class="breadcrumb-item"><a href="javascript:">View Ticket</a></li>
    <li class="breadcrumb-item"><a href="javascript:">View Ticket Details</a></li>
</ul>

<div class="row">
    <div class="col-xl-12">
        <app-card cardTitle="Ticket Details" blockClass="table-border-style" class="list-panel add-panel">
            <div class="row">
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    <label class="w-100 view-label">Ticket ID<span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    {{obj?.ticketNumber}}
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    <label class="w-100 view-label">Category<span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    {{obj?.categoryName}}
                </div>

                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    <label class="w-100 view-label">Sub Category<span class="float-right">:</span></label>

                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    {{obj?.subcategoryName}}
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    <label class="w-100 view-label">Entity Type<span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    {{obj?.entityTypeName}}
                </div>
                <!-- <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    <label class="w-100 view-label">Entity Name<span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    {{obj?.entityName}}
                </div> -->
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    <label class="w-100 view-label">License No<span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    {{obj?.licenceNumber}}
                </div>
                <!-- <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    <label class="w-100 view-label">INR No<span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    INR1234
                </div> -->
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    <label class="w-100 view-label">Address <span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    Chennai
                </div>
                <!-- <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    <label class="w-100 view-label">Address 2<span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    Velachery
                </div> -->
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    <label class="w-100 view-label">State<span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    TamilNadu
                </div>

                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    <label class="w-100 view-label">Mobile No<span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    {{obj?.mobileNumber}}
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    <label class="w-100 view-label">Email Address<span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    {{obj?.emailId}}
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    <label class="w-100 view-label">Caller Number<span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    {{obj?.callerNumber}}
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    <label class="w-100 view-label">Issue details<span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    {{obj?.issueName}}
                </div>

                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    <label class="w-100 view-label">Knowledge Base <span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    {{obj?.knowledgeBaseName}}
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12" *ngIf="obj?.categoryName== 'Incident'">
                    <label class="w-100 view-label">Priority<span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12" *ngIf="obj?.categoryName== 'Incident'">
                    {{obj?.priorityName}}
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12" *ngIf="obj?.categoryName== 'Incident'">
                    <label class="w-100 view-label">Closure Priority<span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12" *ngIf="obj?.categoryName== 'Incident'">
                    {{obj?.closurepriorityName}}
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    <label class="w-100 view-label">Assigned Group<span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    {{obj?.groupName}}
                </div>

                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    <label class="w-100 view-label">SLA<span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    {{obj?.slaDays}}
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    <label class="w-100 view-label">Assigned to<span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    {{obj?.groupMemberName}}
                </div>

                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    <label class="w-100 view-label">Created By<span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    {{obj?.createdBy}}
                </div>

                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    <label class="w-100 view-label">Created On<span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    {{obj?.createdDate|date:'medium'}}
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    <label class="w-100 view-label">Updated By<span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    {{obj?.modifiedBy}}
                </div>

                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    <label class="w-100 view-label">Updated On<span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    {{obj?.modifiedDate|date:'medium'}}
                </div>
                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12" *ngIf="obj?.categoryName!= 'Incident'">
                    <label class="w-100 view-label">Description</label>
                </div>
                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12" *ngIf="obj?.categoryName!= 'Incident'">
                    {{obj?.description}}
                </div>
            </div>
        </app-card>
    </div>

    <!-- <div class="col-xl-12">
        <app-card cardTitle="Issue Summary" blockClass="table-border-style" class="list-panel add-panel">
            <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                <div class="form-group">
                    <label>No Records Found</label>
                </div>
            </div>

        </app-card>
    </div> -->

    <!-- <div class="col-xl-12">
        <app-card cardTitle="Issue Description" blockClass="table-border-style" class="add-panel list-panel ">
            <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                <div class="form-group">
                    <label>No Records Found</label>
                </div>
            </div>

        </app-card>
    </div> -->
    <div class="col-xl-12">
        <form #createForm="ngForm" autocomplete="off">
            <app-card [hidHeader]="true" blockClass="table-border-style" class="list-panel">
                <div class="row">
                    <div class="col-lg-3 col-md-3 col-sm-6 col-12">
                        <div class="form-group">
                            <label>Ticket Status</label>

                            <select id="category" class="form-control" [disabled]="ticketstatusbased" name="status" #status="ngModel" [(ngModel)]="ticketupdate['status']" required>
                                <option value="">select status</option>
                                <option *ngFor="let item of statuslist" value="{{item.id}}">{{item.status}}</option>
                            </select>
                            <div *ngIf="status.invalid && (status.dirty || status.touched || formSubmitted)" class="error-msg">
                                <div *ngIf="status?.errors?.required"><i class="fa fa-times"></i> Ticket Status is required
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-3 col-sm-6 col-12" *ngIf="obj?.categoryName== 'Incident'">
                        <div class="form-group">
                            <label>Show/Hide Closure</label><br>
                            <input type="checkbox" [checked]="show" [disabled]="ticketstatusbased" (click)="closurecheck();">
                        </div>
                    </div>


                    <div class="col-lg-3 col-md-3 col-sm-6 col-12" *ngIf="obj?.categoryName== 'Incident'">
                        <div class="form-group" *ngIf="show">
                            <label>Closure Priority</label>
                            <select id="category1" class="form-control" name="priority" #priority="ngModel" [(ngModel)]="ticketupdate['priority']">
                            <option value="">select Priority</option>
                            <option *ngFor="let item of priority1" value="{{item.id}}">{{item.priority}}</option>
                        </select>
                            <!-- <div *ngIf="priority.invalid && (priority.dirty || priority.touched || formSubmitted)" class="error-msg">
                                <div *ngIf="priority?.errors?.required"><i class="fa fa-times"></i> Closure Priority is required
                                </div>
                            </div> -->
                        </div>
                    </div>
                    <div class="col-xl-12">
                        <div class="form-group">
                            <label>Notes</label>
                            <textarea appInputRestriction class="form-control" rows="3" name="notes" #notes="ngModel" [(ngModel)]="ticketupdate['notes']" required></textarea> 5000 characters remaining <br>
                            <div *ngIf="notes.invalid && (notes.dirty || notes.touched || formSubmitted)" class="error-msg">
                                <div *ngIf="notes?.errors?.required"><i class="fa fa-times"></i>Notes is required
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </app-card>
        </form>
    </div>

    <div class="col-xl-12 ">
        <app-card cardTitle="Ticket History Details {{i+1}}" blockClass="table-border-style" class="list-panel add-panel" *ngFor="let tickdat of obj1;let i=index">
            <div class="row">
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    <label class="w-100 view-label">Processed By<span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    {{tickdat?.historyprocessedBy}}
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    <label class="w-100 view-label">Status<span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    {{tickdat?.historyticketstatusName}}
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    <label class="w-100 view-label">Date, Time<span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    {{tickdat?.historycreatedDate|date:'medium'}}
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    <label class="w-100 view-label">Assigned Group<span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    {{tickdat?.historygroupName}}
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    <label class="w-100 view-label">Actual Problem<span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    {{tickdat?.actualproblem}}
                </div>


                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12" *ngIf="obj?.categoryName== 'Incident'">
                    <label class="w-100 view-label"> Closure Priority<span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12" *ngIf="obj?.categoryName== 'Incident'">
                    {{tickdat?.closurePriority}}
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    <label class="w-100 view-label">Action Taken<span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    {{tickdat?.actionTaken}}
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12" *ngIf="obj?.categoryName== 'Incident'">
                    <label class="w-100 view-label">Description<span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12" *ngIf="obj?.categoryName== 'Incident'">
                    {{obj?.description}}
                    <!-- Stock issue was complete -->
                </div>
            </div>
        </app-card>
    </div>

    <!-- <div class="col-xl-12 ">
        <app-card cardTitle="Ticket History Details 2" blockClass="table-border-style" class="list-panel add-panel">
            <div class="row">
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    <label class="w-100 view-label">Processed By<span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    Louis
                </div>

                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    <label class="w-100 view-label">Status<span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    Progress
                </div>

                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    <label class="w-100 view-label">Date, Time<span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    14/01/2021
                </div>

                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    <label class="w-100 view-label">Assigned Group<span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    Private
                </div>

                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    <label class="w-100 view-label">Actual Problem<span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    Opening stock wrongly posted
                </div>

                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    <label class="w-100 view-label"> Closure Priority<span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    P1
                </div>

                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    <label class="w-100 view-label">Action Taken<span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    Adjusted with stock
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    <label class="w-100 view-label">Description<span class="float-right">:</span></label>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                    Stock issue was complete
                </div>
            </div>
        </app-card>
    </div> -->
</div>
<div class="col-lg-12 col-md-12 col-sm-12 col-12">
    <div class="form-group  text-right">
        <button class="btn btn-primary m-r-5" (click)="updatestatus(createForm);" [disabled]="ticketstatusbased">
            Submit
        </button>
        <button class="btn btn-secondary" routerLink='/helpdesk/ticket/viewticket'>
            Cancel
        </button>
    </div>

</div>