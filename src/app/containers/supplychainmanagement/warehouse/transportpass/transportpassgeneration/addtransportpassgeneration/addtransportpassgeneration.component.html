<h5 class="m-b-10 ng-star-inserted">Add Transport Pass Generation </h5>

<ul class="breadcrumb p-0">
    <li class="breadcrumb-item"><a href="javascript:"><i class="feather icon-home"></i></a></li>
    <li class="breadcrumb-item"><a href="javascript:">Supply Chain Management</a></li>
    <li class="breadcrumb-item"><a href="javascript:">Warehouse</a></li>
    <li class="breadcrumb-item"><a href="javascript:">Transport Pass Generation</a></li>
    <li aria-current="page" class="breadcrumb-item active">Add</li>
</ul>

<div class="row">
    <div class="col-xl-12">
        <form [formGroup]="transportpass" autocomplete="off">
            <app-card cardTitle="Enter Below Details to Transport Pass Generation" class="list-panel add-panel">
                <div class="row">
                    <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                        <div class="form-group">
                            <label>Advance Cosideration Fee</label>
                            <input type="text" name="advanceConsiderationFee" class="form-control"
                                formControlName="advanceConsiderationFee" required
                                placeholder="Enter Advance Cosideration Fee" readonly>
                            <div *ngIf="formSubmitted && transportpass.get('advanceConsiderationFee').errors || transportpass.get('advanceConsiderationFee').touched "
                                class="error-msg">
                                <span *ngIf="transportpass.get('advanceConsiderationFee').errors?.required">
                                    Advance Cosideration Fee is required
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                        <div class="form-group">
                            <label>Advance Scanning Fee </label>
                            <input type="text" name="advanceScanningFee" class="form-control"
                                formControlName="advanceScanningFee" required placeholder="Enter Advance Scanning Fee " readonly>
                            <div *ngIf="formSubmitted && transportpass.get('advanceScanningFee').errors || transportpass.get('advanceScanningFee').touched "
                                class="error-msg">
                                <span *ngIf="transportpass.get('advanceScanningFee').errors?.required">
                                    Advance Scanning Fee is required
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                        <div class="form-group">
                            <label>Advance Duty </label>
                            <input type="text" name="advanceDuty" class="form-control" formControlName="advanceDuty"
                                required placeholder="Enter Advance Duty" readonly>
                            <div *ngIf="formSubmitted && transportpass.get('advanceDuty').errors || transportpass.get('advanceDuty').touched "
                                class="error-msg">
                                <span *ngIf="transportpass.get('advanceDuty').errors?.required">
                                    Advance Duty is required
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                        <div class="form-group">
                            <label>Date </label>
                            <input type="Date" name="passGenerationDate" class="form-control"
                                formControlName="passGenerationDate" required readonly>
                            <div *ngIf="formSubmitted && transportpass.get('passGenerationDate').errors || transportpass.get('passGenerationDate').touched "
                                class="error-msg">
                                <span *ngIf="transportpass.get('passGenerationDate').errors?.required">
                                    Date is required
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                        <div class="form-group">
                            <label>From BWFL2</label>
                            <input type="text" name="fromBwfl2" class="form-control" formControlName="fromBwfl2"
                                required placeholder="Enter From BWFL2" readonly>
                            <div *ngIf="formSubmitted && transportpass.get('fromBwfl2').errors || transportpass.get('fromBwfl2').touched "
                                class="error-msg">
                                <span *ngIf="transportpass.get('fromBwfl2').errors?.required">
                                    From BWFL2 is required
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                        <div class="form-group">
                            <label>To</label>
                            <input type="text" name="to" class="form-control" formControlName="to" required
                                placeholder="Enter To">
                            <div *ngIf="formSubmitted && transportpass.get('to').errors || transportpass.get('to').touched "
                                class="error-msg">
                                <span *ngIf="transportpass.get('to').errors?.required">
                                    To is required
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                        <div class="form-group">
                            <label>Licensee no</label>
                            <input type="text" class="form-control" name="licenseeNo" formControlName="licenseeNo"
                                required placeholder="Enter Licensee No" readonly>
                            <div *ngIf="formSubmitted && transportpass.get('licenseeNo').errors || transportpass.get('licenseeNo').touched "
                                class="error-msg">
                                <span *ngIf="transportpass.get('licenseeNo').errors?.required">
                                    Licensee no is required
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                        <div class="form-group">
                            <label>Licensee Address</label>
                            <input type="text" class="form-control" name="licenseeAddress"
                                formControlName="licenseeAddress" required placeholder="Enter Licensee Address" readonly>
                            <div *ngIf="formSubmitted && transportpass.get('licenseeAddress').errors || transportpass.get('licenseeAddress').touched "
                                class="error-msg">
                                <span *ngIf="transportpass.get('licenseeAddress').errors?.required">
                                    Licensee Address is required
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                        <div class="form-group">
                            <label>Licensee District</label>
                            <input type="text" class="form-control" name="licenseeDistrict"
                                formControlName="licenseeDistrict" required placeholder="Enter Licensee District" readonly>
                            <div *ngIf="formSubmitted && transportpass.get('licenseeDistrict').errors || transportpass.get('licenseeDistrict').touched "
                                class="error-msg">
                                <span *ngIf="transportpass.get('licenseeDistrict').errors?.required">
                                    Licensee District is required
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                        <div class="form-group">
                            <label>Route </label>
                            <select id=routeId class="form-control" name="routeId" formControlName="routeId" required>
                                <option value="">Select</option>
                                <option value=1>Route1</option>
                            </select>
                            <div *ngIf="formSubmitted && transportpass.get('routeId').errors || transportpass.get('routeId').touched "
                                class="error-msg">
                                <span *ngIf="transportpass.get('routeId').errors?.required">
                                    Route is required
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                        <div class="form-group">
                            <label>Vehicle Registration No.</label>
                            <input type="text" class="form-control" name="" formControlName="vehicleRegistrationNo"
                                required placeholder="Enter Vehicle Registration No.">
                            <div *ngIf="formSubmitted && transportpass.get('vehicleRegistrationNo').errors || transportpass.get('vehicleRegistrationNo').touched "
                                class="error-msg">
                                <span *ngIf="transportpass.get('vehicleRegistrationNo').errors?.required">
                                    Vehicle Registration No. is required
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                        <div class="form-group">
                            <label>Vehicle Driver Name</label>
                            <input type="text" class="form-control" name="vehicleDriverName"
                                formControlName="vehicleDriverName" required placeholder="Enter Vehicle Driver Name">
                            <div *ngIf="formSubmitted && transportpass.get('vehicleDriverName').errors || transportpass.get('vehicleDriverName').touched "
                                class="error-msg">
                                <span *ngIf="transportpass.get('vehicleDriverName').errors?.required">
                                    Vehicle Driver Name is required
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                        <div class="form-group">
                            <label>Vehicle Agency Name And Address</label>
                            <input type="text" class="form-control" name="vehicleAgentNameAddress"
                                formControlName="vehicleAgentNameAddress" required
                                placeholder="Enter Vehicle Agency Name And Address">
                            <div *ngIf="formSubmitted && transportpass.get('vehicleAgentNameAddress').errors || transportpass.get('vehicleAgentNameAddress').touched "
                                class="error-msg">
                                <span *ngIf="transportpass.get('vehicleAgentNameAddress').errors?.required">
                                    Vehicle Agency Name And Address is required
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                        <div class="form-group">
                            <label>Major Districts In Routes</label>
                            <select class="form-control" id=majorDistrictsRnRoutes1Id name="majorDistrictsRnRoutes1Id"
                                formControlName="majorDistrictsRnRoutes1Id" required>
                                <option value="">Select</option>
                                <option value=1>Faizarabad</option>
                                <option value=2>Lucknow</option>
                            </select>
                            <div *ngIf="formSubmitted && transportpass.get('majorDistrictsRnRoutes1Id').errors || transportpass.get('majorDistrictsRnRoutes1Id').touched "
                                class="error-msg">
                                <span *ngIf="transportpass.get('majorDistrictsRnRoutes1Id').errors?.required">
                                    Major Districts In Routes is required
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </app-card>
            <app-card cardTitle="Vehicle Weight details" class="list-panel add-panel">
                <div class="row">
                    <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                        <div class="form-group">
                            <label>Gross Weight</label>
                            <input type="number" class="form-control" name="grossWeight" formControlName="grossWeight"
                                required placeholder="Enter Gross Weight" (keyup)="getnetweight()">
                            <div *ngIf="formSubmitted && transportpass.get('grossWeight').errors || transportpass.get('grossWeight').touched "
                                class="error-msg">
                                <span *ngIf="transportpass.get('grossWeight').errors?.required">
                                    Gross Weight is required
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                        <div class="form-group">
                            <label>Tare Weight </label>
                            <input type="number" class="form-control" name="tierWeight" formControlName="tierWeight"
                                required placeholder="Enter Tier Weight" (keyup)="getnetweight()">
                            <div *ngIf="formSubmitted && transportpass.get('tierWeight').errors || transportpass.get('tierWeight').touched "
                                class="error-msg">
                                <span *ngIf="transportpass.get('tierWeight').errors?.required">
                                    Tier Weight is required
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12">
                        <div class="form-group">
                            <label>Net Weight </label>
                            <input type="number" class="form-control" name="netWeight" formControlName="netWeight"
                                required placeholder="Enter Net Weight" readonly>
                            <div *ngIf="formSubmitted && transportpass.get('netWeight').errors || transportpass.get('netWeight').touched "
                                class="error-msg">
                                <span *ngIf="transportpass.get('netWeight').errors?.required">
                                    Advance Scanning Fee is required
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </app-card>
        </form>
        <app-card cardTitle="Dispatch Product details" class="list-panel add-panel">
            <form [formGroup]='transportpass' autocomplete="off">
                <div class="row">
                    <div class="col-12">
                        <div class="table-responsive">
                            <table class="table table-bordered text-center">
                                <thead>
                                    <tr>
                                        <th>S.No</th>
                                        <th>Brand Name</th>
                                        <th>Size</th>
                                        <th>Available Bottle</th>
                                        <th>Available Box</th>
                                        <th>Breakage</th>
                                        <th>Balance Bottle</th>
                                        <th>Batch No.</th>
                                        <th>Dispatch Box</th>
                                        <th>Dispatch Bottles</th>
                                        <th>Duty</th>
                                        <th>Add Duty</th>
                                        <th>Special Additional Duty</th>
                                        <th>Calculated Duty</th>
                                        <th>Calculated Add. Duty</th>
                                        <th>Calculated Special Additional Duty</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr formArrayName="transportPassGenDetailList"
                                        *ngFor="let pres of transportpass?.get('transportPassGenDetailList')['controls']; let i=index"
                                        id="row{{i}}">
                                        <td [formGroupName]="i">
                                            <div class="form-group mb-0">
                                                {{i+1}}
                                            </div>
                                        </td>

                                        <td [formGroupName]="i">
                                            <select formControlName="brandRegistrationId" class="form-control">
                                                <option value="">Select</option>
                                                <option *ngFor="let b of allbrands" value="{{b.id}}">
                                                    {{b.brandName}}
                                                </option>
                                            </select>

                                        <td [formGroupName]="i">
                                            <select formControlName="size" class="form-control">
                                                <option value="">Select</option>
                                                <option *ngFor='let size of sizelist' value="{{size.id}}">{{size.desc}}
                                                </option>

                                            </select>
                                        </td>
                                        <td [formGroupName]="i">
                                            <input type="number" class="form-control" formControlName="availableBottles"
                                                placeholder="Enter Available Bottle">

                                        </td>
                                        <td [formGroupName]="i">
                                            <div class="form-group mb-0">

                                                <input type="number" class="form-control" formControlName="availableBox"
                                                    placeholder="Enter Available Box">

                                            </div>
                                        </td>
                                        <td [formGroupName]="i">
                                            <div class="form-group mb-0">

                                                <input type="number" class="form-control" formControlName="breakage"
                                                    placeholder="Enter Breakage">
                                            </div>
                                        </td>
                                        <td [formGroupName]="i">
                                            <div class="form-group mb-0">

                                                <input type="number" class="form-control"
                                                    formControlName="balanceBottles" placeholder="Enter Balance Bottle">
                                            </div>
                                        </td>
                                        <td [formGroupName]="i">
                                            <div class="form-group mb-0">

                                                <input type="number" class="form-control" formControlName="batchNo"
                                                    placeholder="Enter Batch No.">
                                            </div>
                                        </td>
                                        <td [formGroupName]="i">
                                            <div class="form-group mb-0">

                                                <input type="number" class="form-control" formControlName="dispatchBox"
                                                    placeholder="Enter Dispatch Box">
                                            </div>
                                        </td>
                                        <td [formGroupName]="i">
                                            <div class="form-group mb-0">

                                                <input type="number" class="form-control"
                                                    formControlName="dispatchBottles"
                                                    placeholder="Enter Dispatch Bottles">
                                            </div>
                                        </td>
                                        <td [formGroupName]="i">
                                            <div class="form-group mb-0">

                                                <input type="number" class="form-control" formControlName="duty"
                                                    placeholder="Enter Duty" style="width: 95px;">
                                            </div>
                                        </td>
                                        <td [formGroupName]="i">
                                            <div class="form-group mb-0">

                                                <input type="number" class="form-control" formControlName="addDuty"
                                                    placeholder="Enter Add Duty">
                                            </div>
                                        </td>
                                        <td [formGroupName]="i">
                                            <div class="form-group mb-0">

                                                <input type="number" class="form-control"
                                                    formControlName="specialAdditionalDuty"
                                                    placeholder="Enter Special Additional Duty">
                                            </div>
                                        </td>
                                        <td [formGroupName]="i">
                                            <div class="form-group mb-0">

                                                <input type="number" class="form-control"
                                                    formControlName="calculatedDuty"
                                                    placeholder="Enter Calculated Duty">
                                            </div>
                                        </td>
                                        <td [formGroupName]="i">
                                            <div class="form-group mb-0">

                                                <input type="number" class="form-control"
                                                    formControlName="calculatedAddDuty"
                                                    placeholder="Enter Calculated Add. Duty">
                                            </div>
                                        </td>
                                        <td [formGroupName]="i">
                                            <div class="form-group mb-0">

                                                <input type="number" class="form-control"
                                                    formControlName="calculatedSpecialAddiDuty"
                                                    placeholder="Enter Calculated Special Additional Duty">
                                            </div>
                                        </td>


                                        <td [formGroupName]="i">
                                            <div class="form-group mb-0">
                                                <i class="fa fa-plus text-primary" title="Add New Row"
                                                    (click)="addrow()" style="cursor: pointer;">
                                                    <!-- <i class="fa fa-times text-primary" title="Delete Row"
                                                    (click)="deleteRow(i)" style="cursor: pointer;"></i> -->
                                                </i>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                                <!-- <tbody>
                                    <tr>
                                        <td> 1</td>
                                        <td><input type="text" class="form-control" placeholder="Enter advanceConsiderationFee"></td>
                                        <td><input type="text" class="form-control" placeholder="Enter Size"></td>
                                        <td><input type="text" class="form-control" placeholder="Enter Available Bottle"></td>
                                        <td><input type="text" class="form-control" placeholder="Enter Available Box"></td>
                                        <td><input type="text" class="form-control" placeholder="Enter Breakage"></td>
                                        <td><input type="text" class="form-control" placeholder="Enter Balance Bottle"></td>
                                        <td><input type="text" class="form-control" placeholder="Enter Batch No."></td>
                                        <td><input type="text" class="form-control" placeholder="Enter Dispatch Box"></td>
                                        <td><input type="text" class="form-control" placeholder="Enter Dispatch Bottles"></td>
                                        <td><input type="text" class="form-control" placeholder="Enter Duty"></td>
                                        <td><input type="text" class="form-control" placeholder="Enter Add Duty"></td>
                                        <td><input type="text" class="form-control" placeholder="Enter Special Additional Duty"></td>
                                        <td><input type="text" class="form-control" placeholder="Enter Calculated Duty"></td>
                                        <td><input type="text" class="form-control" placeholder="Enter Calculated Add. Duty"></td>
                                        <td><input type="text" class="form-control" placeholder="Enter Calculated Special Additional Duty"></td>
                                        <td><i class="fa fa-plus text-primary" title="Add New Row"
                                             style="cursor: pointer;"></i></td>
                                    </tr>
                                </tbody> -->
                            </table>
                        </div>
                    </div>
                </div>
            </form>
        </app-card>
    </div>
    <div class="col-12 text-right mb-4">
        <button type="button" class="btn btn-info ml-2 mb-2" (click)="preview(transportpass)">Preview</button>
        <button type="button" class="btn btn-warning ml-2 mb-2"
            (click)="addTransportGenDetails(transportpass,'DRAFT')">Save as Draft</button>
        <button type="button" class="btn btn-primary ml-2 mb-2"
            (click)="addTransportGenDetails(transportpass,'SUBMITTED')">Submit</button>

        <button type="button" class="btn btn-secondary ml-2 mb-2" (click)="back()">Cancel</button>
    </div>
</div>