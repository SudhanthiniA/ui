<h5 class="m-b-10 ng-star-inserted">Add Stock In (MF5)
</h5>

<ul class="breadcrumb p-0">
    <li class="breadcrumb-item"><a href="javascript:"><i class="feather icon-home"></i></a></li>
    <!-- <li class="breadcrumb-item"><a href="javascript:" [routerLink]="['/supplychainmanagement/dashboard']">Supply Chain Management</a></li> -->
    <li class="breadcrumb-item"><a href="javascript:" [routerLink]="['/supplychainmanagement/dashboard']">{{
            'sugarmill.common.sugarmill' | translate }}
        </a></li>
        <li class="breadcrumb-item"><a href="javascript:" [routerLink]="['/supplychainmanagement/sugarmills/stockin/list']">
            Stock In (MF5)</a></li>
    <li aria-current="page" class="breadcrumb-item active">{{addedit}}</li>
</ul>

<div class="row">

    <div class="col-xl-12">
        <form [formGroup]="stockFormGroup" autocomplete="off">
            <app-card cardTitle="MF 5- Stock In"
                class="list-panel add-panel">
                <div class="row">
                    <div class="col-lg-6 col-md-3 col-sm-6 col-12">
                        <div class="form-group">
                            <label class="mandatory">Cane Crushing Season (Molasses Year)
                            </label>
                            <input type="text" class="form-control" placeholder="Enter Date" formControlName="year"
                                disabled>

                        </div>
                    </div>
                    <div class="col-lg-3 col-md-3 col-sm-6 col-12">
                        <div class="form-group">
                            <label class="mandatory">{{ 'sugarmill.common.date' | translate }}</label>
                            <!-- <input type="date" class="form-control" placeholder="Enter Date" formControlName="stockDate" maxDate="maxDate" minDate="minDate" > -->
                            <input type="date" disabled
                                class="form-control" >
                            <!-- <label for="bussinessin">Date & Time<span class="text-danger">*</span></label> -->
                            <!-- <i class="trigger" [owlDateTimeTrigger]="dtPicker20" class="fas fa-calendar-alt prefix"></i>
                            <owl-date-time #dtPicker20></owl-date-time>
                            <div *ngIf="formSubmitted && stockFormGroup.get('stockDate').errors || stockFormGroup.get('stockDate').touched "
                                class="error-msg">
                                <span *ngIf="stockFormGroup.get('stockDate').errors?.required">
                                    Date is required
                                </span>
                            </div> -->
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-3 col-sm-6 col-12">
                        <div class="form-group">
                            <label class="mandatory">Application No(Decalration folr FOrtnight)</label>
                            <select class="form-control">
                                <option>select</option>
                            </select>   
                        </div>
                    </div>
                    <div class="col-lg-6 col-md-6 col-sm-12 col-12">
                        <div class="form-group">
                            <label class="mandatory">{{ 'sugarmill.stockin.productype' | translate }}</label>
                            <div class="row" style="margin-top: 10px;">
                                <div class="custom-control">
                                    <input type="radio" id="applicationtype_cane" value="Cane Syrup"
                                        formControlName="productType" (click)="clickedevent($event, 'cane')" disabled>
                                    <label for="cane_syrup"> &nbsp; {{ 'sugarmill.stockin.canesyrup' | translate
                                        }}</label>

                                </div>
                                <div class="custom-control">
                                    <input type="radio" id="applicationtype_juice" value="Cane Juice"
                                        formControlName="productType" (click)="clickedevent($event, 'canejuice')"
                                        disabled>
                                    <label for="cane_syrup"> &nbsp; {{ 'sugarmill.stockin.canejuice' | translate
                                        }}</label>

                                </div>
                                <div class="custom-control">
                                    <input type="radio" id="applicationtype_molasess" value="Molasses"
                                        formControlName="productType" (click)="clickedevent($event, 'molasess')"
                                        disabled>
                                    <label for="cane_syrup"> &nbsp; {{ 'sugarmill.stockin.molasses' | translate
                                        }}</label>

                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-3 col-sm-6 col-12">
                        <div class="form-group">
                            <label>Cane Crushed (Qtls)</label>
                            <input type="number" formControlName="caneCrushed" class="form-control"
                                placeholder="Enter Cane Crushed" required>
                            <div class="text-primary">{{inWords(stockFormGroup.get('caneCrushed').value, 'Quintals')}}
                            </div>
                            <div *ngIf="formSubmitted && stockFormGroup.get('caneCrushed').errors || stockFormGroup.get('caneCrushed').touched "
                                class="error-msg">
                                <span *ngIf="stockFormGroup.get('caneCrushed').errors?.required">
                                    caneCrushed is required
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-3 col-sm-6 col-12">
                        <div class="form-group">
                            <label class="mandatory">Molasses Type</label>
                            <select class="form-control">
                                <option>C-Heavy</option>
                            </select>
                           
                        </div>
                    </div>
                  
                   

                </div>
            </app-card>
        </form>
    </div> 

    <div class="col-xl-12">
        <form [formGroup]="stockFormGroup" autocomplete="off">
            <app-card cardTitle="{{ 'sugarmill.stockin.entertankdetails' | translate }}" class="list-panel add-panel">
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                        <div class="table-responsive">
                            <table class="table table-bordered mb-0">
                                <thead>
                                    <tr>
                                        <th>Sl No</th>
                                        <th>Tank ID<span class="mandatory"></span></th>
                                        <!-- <th>{{ 'sugarmill.stockin.tankType' | translate }}</th> -->
                                        <th>Total Tank Capacity(Qtl)<span class="mandatory"></span></th>
                                        <!-- <th>{{ 'sugarmill.stockin.totalcapacity' | translate }} <br> {{
                                            'sugarmill.stockin.totaltank' | translate }}<span class="mandatory"></span></th> -->
                                        <th>Available Tank Capacity<span class="mandatory"></span></th>
                                            <th>Recieved Molasses(QTL)<span class="mandatory"></span></th>
                                            <th>Molasses Type<span class="mandatory"></span></th>
                                            <th>Total Quantity (Qtls)<span class="mandatory"></span></th>
                                            <th>Quantity Levy (Qtls)<span class="mandatory"></span></th>
                                            <th>Quantity Free (Qtls)<span class="mandatory"></span></th>
                                            <th>TRS(%)</th>
                                            <th>Brix</th>
                                        <!-- <th>{{ 'sugarmill.stockin.grade' | translate }}<span class="mandatory"></span></th> -->
                                        <!-- <th>{{ 'sugarmill.stockin.trs (%)' | translate }}</th>
                                        <th>{{ 'sugarmill.stockin.brix (%)' | translate }}</th> -->
                                        <!-- <th>{{ 'sugarmill.common.quantity' | translate }}<span class="mandatory"></span></th> -->
                                        <th>Add Row</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr formArrayName="stockInDetail"
                                        *ngFor="let pres of stockFormGroup?.get('stockInDetail')['controls']; let i=index"
                                        id="row{{i}}">
                                        <td [formGroupName]="i">
                                            <div class="form-group mb-0">
                                                {{i+1}}
                                            </div>
                                        </td>
                                        <td [formGroupName]="i">
                                            <div class="form-group mb-0">
                                                <select formControlName="tankId" class="form-control"
                                                    (change)="tankSelect($event.target.value,pres)"
                                                    style="width: 100px;">
                                                    <option value="">{{ 'sugarmill.common.select' | translate }}
                                                    </option>
                                                    <option *ngFor="let item of tankList" value="{{item.id}}">
                                                        {{item.tankName}}
                                                    </option>
                                                </select>
                                            </div>
                                        </td>
                                        <!-- <td [formGroupName]="i">
                                            <div class="form-group mb-0">
                                                    <input type="text" id="tankname" name="tankname" formControlName="tankname"
                                                    class="form-control" placeholder="Tank Type" disabled>
                                                <select formControlName="tankId" class="form-control"
                                                    (change)="tankSelect($event.target.value,pres)"
                                                    style="width: 100px;">
                                                    <option value="">{{ 'sugarmill.common.select' | translate }}</option>
                                                    <option *ngFor="let item of tankList" value="{{item.id}}">
                                                        {{item.tankName}}
                                                    </option>
                                                </select>
                                            </div>
                                        </td> -->
                                        <td>10000
                                        </td>
                                        <td>100</td>
                                        <td> <input type="text" class="form-control" placeholder=""></td>
                                        <td class="text-left">C heavy
                                        </td>
                                        <td>6000
                                        </td>
                                        <td>18%</td>
                                        <td>10%</td>
                                      
                                        <td><input type="text" class="form-control" placeholder=""></td>
                                        <td><input type="text" class="form-control" placeholder=""></td>
                                        <!-- <td [formGroupName]="i">
                                            <div class="form-group mb-0">
                                                <input type="number" id="occupiedcapacity" name="occupiedcapacity"
                                                    formControlName="occupiedCapacity" class="form-control"
                                                    placeholder="2000" disabled>
                                                <div class="text-primary">{{inWords(pres.get('occupiedCapacity').value,
                                                    'Liters')}}</div>
                                            </div>
                                        </td> -->
                                        <!-- <td [formGroupName]="i">
                                            <div class="form-group mb-0">
                                                <input type="text" id="availablecapacity" name="bottlegstn"
                                                    formControlName="availableCapacity" class="form-control"
                                                    placeholder="3000" disabled>
                                                <div class="text-primary">{{inWords(pres.get('availableCapacity').value,
                                                    'Liters')}}</div>
                                            </div>
                                        </td> -->
                                        <!-- <td [formGroupName]="i">
                                            <div class="form-group mb-0"> -->
                                                <!-- <select formControlName="grade" class="form-control"
                                                    style="width: 100px;">
                                                    <option value="">{{ 'sugarmill.common.select' | translate }}</option>
                                                    <option *ngFor="let item of tankList" value="{{item.id}}">
                                                        {{item.tankName}}
                                                    </option>
                                                </select> -->
                                                <!-- <select class="form-control" formControlName="gradeId" disabled style="width: 100px;">
                                                <option value="">{{ 'sugarmill.common.select' | translate }}</option>
                                                <option *ngFor="let molasses of tankGradeList" value="{{molasses.id}}">{{molasses.name}}</option>
                                                <option value="c-heavy">C-Heavy</option>
                
                                            </select> -->
                                                <!-- <input type="text" id="grade" name="grade"
                                                    value="{{this.gradename(pres.get('gradeId').value)}}"
                                                    class="form-control" placeholder="A" disabled>

                                            </div>
                                        </td> -->
                                        <!-- <td [formGroupName]="i">
                                            <div class="form-group mb-0">
                                                <input type="number" id="trs" name="trs" formControlName="trs"
                                                    class="form-control" placeholder="TRS (%)">
                                                    <input id="displayorder" type="text"
                                                    oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
                                                    maxlength="2" class="form-control" id="trs" name="trs" formControlName="trs" placeholder="TRS (%)">
                                                    <div class="text-primary">{{inWords(pres.get('trs').value, '%')}}</div>
                                            </div>
                                        </td> -->
                                        <!-- <td [formGroupName]="i">
                                            <div class="form-group mb-0">
                                                <input type="number" id="brix" name="bricks" formControlName="brix"
                                                    class="form-control" placeholder="BRIX (%)">
                                                    <input id="displayorder" type="text"
                                                    oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
                                                    maxlength="2" id="brix" name="bricks" formControlName="brix"
                                                    class="form-control" placeholder="BRIX (%)">
                                                    <div class="text-primary">{{inWords(pres.get('brix').value, '%')}}</div>
                                            </div>
                                        </td> -->
                                        <!-- <td [formGroupName]="i">
                                            <div class="form-group mb-0"> -->
                                                <!-- <input type="number" (click)="addNewRow(i)" id="quantity"
                                                    name="quantity" formControlName="quantity" class="form-control"
                                                    placeholder="Quantity"> -->
                                                <!-- <input id="displayorder" type="text"
                                                    oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
                                                    maxlength="5" id="brix" (click)="addNewRow(i)" id="quantity"
                                                    name="quantity" formControlName="quantity" class="form-control"
                                                    placeholder="Quantity"
                                                    [attr.disabled]="(pres.get('tankId').value) ? null : 'disabled'"
                                                    [required]="(pres.get('tankId').value)>0"
                                                    (keyup)="checkingvalue(pres)">
                                            </div>
                                            <div class="text-primary overflow-auto">
                                                {{inWords(pres.get('quantity').value, 'Liters')}}</div>
                                            <div *ngIf="formSubmitted && pres.get('quantity').errors || pres.get('quantity').touched "
                                                class="error-msg">
                                                <span *ngIf="pres.get('quantity').errors?.required">
                                                    Quantity is required
                                                </span>
                                            </div>
                                        </td> -->
                                        <td class="table-action-column text-center">
                                            <button class="btn btn-icon btn-success" type="button">
                                            <i class="feather icon-plus"></i></button>
                                            <!-- <button class="btn btn-icon btn-danger ml-2" type="button">
                                            <i class="fas fa-trash-alt"></i></button> -->
                                            </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                    </div>
                </div>
            </app-card>
        </form>
    </div>

    <div class="col-12 text-right mb-4">
        <button type="button" (click)="preview(stockFormGroup)" class="btn btn-info ml-2 mb-2">Preview</button>
            <button type="button" (click)="addstock(stockFormGroup,'SUBMITTED')" class="btn btn-warning ml-2 mb-2"
            >Save as Draft</button>
        <button type="button" (click)="addstock(stockFormGroup,'SUBMITTED')" class="btn btn-success ml-2 mb-2"
            >{{ 'sugarmill.common.submit' | translate }}</button>
        <button type="button" class="btn btn-secondary ml-2 mb-2"
            routerLink="/supplychainmanagement/sugarmills/stockin/list">Close
            </button>
    </div>
</div>